mac xserver にssh接続をする

macでxserverにssh接続をした際のメモ

1.sshとは何か？
2.ssh接続に必要な情報の確認
3.秘密鍵の設定とsshコマンドの実行
4.ssh接続までにつまずいた点

1.sshとはなにか？
sshは"Secure SHell"の略

日本語にすると安全なシェルということになります。

...シェルがわからない方はこちら

実際にどういうものかというと

インターネットでサーバと情報の受け渡しを行う際
暗号化などせずに受け渡しを行っていると
ハッキングなどで簡単に情報が漏洩してしまう恐れがあるので
受け渡しを行う情報を暗号化して、情報の漏洩を防ぐようにしよう

と言った、ようなシステムです。

利点としては以下のような点があります。
・取り扱う情報の暗号化によって漏洩を防ぐ
・情報を暗号化(データを圧縮)し、送受信を効率化


2.ssh接続に必要な情報の確認
mac(OS X)には既にUNIXのコマンドとしてSSHクライアントが入っています。
...UNIXとは
...クライアントとは

なので、macに標準で搭載されているターミナルにて実行します。
Finder 「アプリケーション」-> 「ユーティリティ」 -> 「ターミナル」

下記を参考にssh に必要な情報を確認、また秘密鍵をダウンロードしてきます。

↓xserver ssh マニュアル
http://www.xserver.ne.jp/manual/man_server_ssh.php

一度、ssh接続に必要な情報を確認します
・サーバーのURL(サーバーID.xsrv.jp)
・ユーザ名(サーバーID)
・接続ポート(10022)
・秘密鍵(マニュアル "公開鍵認証用鍵ペアの生成、公開鍵の登録"項目)

3.秘密鍵の設定とsshコマンドの実行
・秘密鍵の設定
Finder 「ユーザ」 -> 「.ssh」ディレクトリ内に秘密鍵を移動
移動後、秘密鍵のファイル名を下記のように変更してください
サーバーID.key
↓
id_rsa

...「.ssh」は非表示のファイルなので、表示させる為の設定が必要です。

次にid_rasファイルのパーミッションを変更します
cd .ssh // .sshディレクトリまで移動
chmod 600 id_rsa // パーミッションを600に変更

・コマンド
ssh 接続を行う際は下記のコマンドを使用します。
ssh -p 接続ポート ユーザ名@サーバのURL

詳細は"ssh -h"コマンドを実行して確認してください。

以上で準備完了です。

実際にコマンドを実行
パスワード入力画面が表示されたら、秘密鍵を作った時のパスワードを設定して完了です。

4.ssh接続までにつまずいた点
・秘密鍵のファイル名を変更せずにsshコマンドを実行したため、下記のようなエラーがでました。
　まあ、ダウンロードした鍵ファイルをただ、.sshディレクトリに入れただけじゃ、読み込まれるわけないですよね...
　permission denied (publickey,gssapi-with-mic)
　対処法 : 秘密鍵ファイル名を変更 サーバID.key -> id_rsa

・理由はよくわかりませんが、読み書き可が所有者のみのパーミッションに変更する必要がありました。
　Permissions 0666 -> Permissions 0600


Shell(シェル)
シェルとはUNIXなど、OSで使用するコマンドインタプリタのことです。

ちなみに、インタプリタとはユーザが打ち込んだコマンド(指示)を読み込み
それに応じて動作を実行するプログラムのことを指します。

つまり、シェル=ユーザが打ち込んだコマンドを実行して処理を行うプログラムのことになります。


クライアント
クライアントとは、サーバーの提供する機能やデータを利用するPCのこと。
また、サーバー祖父等レアの提供する機能やデータを利用するソフトウェアのこと
例えばブラウザ



クライアントとホストの違い<-以外と難しくね？